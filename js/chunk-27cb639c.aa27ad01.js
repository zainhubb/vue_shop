(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-27cb639c"],{ca6c:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("商品管理")]),a("el-breadcrumb-item",[t._v("商品分类")])],1),a("el-button",{attrs:{type:"primary"},on:{click:t.showadddialog}},[t._v("添加分类")]),a("el-table",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:t.catelist,"row-key":"cat_id",border:"","tree-props":{children:"children"}}},[a("el-table-column",{attrs:{prop:"cat_name",label:"分类名称",sortable:"",width:"180"}}),a("el-table-column",{attrs:{prop:"cat_deleted",label:"是否有效",sortable:"",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[!1===e.row.cat_deleted?a("i",{staticClass:"el-icon-success",staticStyle:{color:"green"}}):!0===e.row.cat_deleted?a("i",{staticClass:"el-icon-error",staticStyle:{color:"red"}}):t._e()]}}])}),a("el-table-column",{attrs:{prop:"cat_level",label:"分类等级",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.cat_level?a("el-tag",[t._v("等级一")]):1===e.row.cat_level?a("el-tag",{attrs:{type:"success"}},[t._v("等级二")]):2===e.row.cat_level?a("el-tag",{attrs:{type:"warning"}},[t._v("等级三")]):t._e()]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{staticClass:"item",attrs:{content:"编辑",placement:"top",enterable:!1}},[a("el-button",{staticStyle:{margin:"0 15px"},attrs:{type:"primary",icon:"el-icon-edit",size:"mini",circle:""},on:{click:function(a){return t.showeditdialog(e.row)}}})],1),a("el-tooltip",{staticClass:"item",attrs:{content:"删除",placement:"top",enterable:!1}},[a("el-button",{staticStyle:{margin:"0 15px"},attrs:{type:"danger",icon:"el-icon-delete",size:"mini",circle:""},on:{click:function(a){return t.removecatebyid(e.row.cat_id)}}})],1)]}}])})],1),a("el-pagination",{attrs:{"current-page":t.queryinfo.pagenum,"page-sizes":[1,2,5,10],"page-size":t.queryinfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),a("el-dialog",{ref:"addcateFormRef",attrs:{title:"添加分类",visible:t.adddialogVisible,width:"45%"},on:{"update:visible":function(e){t.adddialogVisible=e},close:t.resetaddcateform}},[a("el-form",{ref:"addcateFormRef",attrs:{model:t.addcateForm,rules:t.addRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"分类名称",prop:"cat_name"}},[a("el-input",{model:{value:t.addcateForm.cat_name,callback:function(e){t.$set(t.addcateForm,"cat_name",e)},expression:"addcateForm.cat_name"}})],1),a("el-form-item",{attrs:{label:"父级分类"}},[a("el-cascader",{attrs:{options:t.parentcatelist,props:t.cascaderporps,clearable:""},on:{change:t.parentcatechange},model:{value:t.selectedkeys,callback:function(e){t.selectedkeys=e},expression:"selectedkeys"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.adddialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.addCate}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"编辑分类",visible:t.editdialogVisible,width:"45%"},on:{"update:visible":function(e){t.editdialogVisible=e}}},[a("el-form",{ref:"editcateFormRef",attrs:{model:t.editcateForm,rules:t.addRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"分类名称",prop:"cat_name"}},[a("el-input",{model:{value:t.editcateForm.cat_name,callback:function(e){t.$set(t.editcateForm,"cat_name",e)},expression:"editcateForm.cat_name"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.editdialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.editcate}},[t._v("确 定")])],1)],1)],1)},n=[],c=(a("96cf"),a("1da1")),i=a("dc10"),o={data:function(){return{queryinfo:{type:3,pagenum:1,pagesize:5},catelist:[],total:0,adddialogVisible:!1,editdialogVisible:!1,addcateForm:{cat_name:"",cat_pid:0,cat_level:0},editcateForm:{},addRules:{cat_name:[{required:!0,message:"请输入分类名称",trigger:"blur"}]},parentcatelist:[],cascaderporps:{value:"cat_id",expandTrigger:"hover",label:"cat_name",children:"children",checkStrictly:"true"},selectedkeys:[]}},created:function(){this.getcatelist()},methods:{getcatelist:function(){var t=this;Object(i["h"])(this.queryinfo).then((function(e){if(200!==e.data.meta.status)return t.$message.error("商品分类获取失败!");t.catelist=e.data.data.result,t.total=e.data.data.total}))},handleCurrentChange:function(t){this.queryinfo.pagenum=t,this.getcatelist()},handleSizeChange:function(t){this.queryinfo.pagesize=t,this.getcatelist()},showadddialog:function(){this.getParentcatelist(),this.adddialogVisible=!0},showeditdialog:function(t){var e=this;Object(i["g"])(t.cat_id).then((function(t){if(200!==t.data.meta.status)return e.$message.error("获取分类信息失败");e.editcateForm=t.data.data,e.editdialogVisible=!0}))},getParentcatelist:function(){var t=this;Object(i["f"])({type:2}).then((function(e){if(200!==e.data.meta.status)return t.$message.error("获取父级分类失败!");t.parentcatelist=e.data.data}))},parentcatechange:function(){this.selectedkeys.length>0&&(this.addcateForm.cat_pid=this.selectedkeys[this.selectedkeys.length-1],this.addcateForm.cat_level=this.selectedkeys.length)},addCate:function(){var t=this;console.log(this.addcateForm),this.$refs.addcateFormRef.validate((function(e){e&&Object(i["a"])(t.addcateForm).then((function(e){if(201!==e.data.meta.status)return t.$message.error("添加分类失败!");t.$message.success("添加分类成功!"),t.getcatelist(),t.adddialogVisible=!1}))}))},resetaddcateform:function(){this.$refs.addcateFormRef.resetFields(),this.selectedkeys=[],this.addcateForm.cat_pid=0,this.addcateForm.cat_level=0},editcate:function(){var t=this;this.$refs.editcateFormRef.validate((function(e){e&&Object(i["d"])(t.editcateForm.cat_id,{cat_name:t.editcateForm.cat_name}).then((function(e){if(200!==e.data.meta.status)return t.$message.error("修改分类失败!");t.$message.success("修改分类成功!"),t.getcatelist(),t.editdialogVisible=!1}))}))},removecatebyid:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.$confirm("此操作将永久删除该商品分类, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(t){return t}));case 2:if(r=a.sent,"confirm"===r){a.next=5;break}return a.abrupt("return",e.$message.info("取消删除"));case 5:Object(i["l"])(t).then((function(t){if(200!==t.data.meta.status)return e.$message.error("删除失败!");e.$message.success("删除成功!"),e.getcatelist()}));case 6:case"end":return a.stop()}}),a)})))()}}},s=o,l=a("2877"),d=Object(l["a"])(s,r,n,!1,null,"462427d2",null);e["default"]=d.exports},dc10:function(t,e,a){"use strict";a.d(e,"i",(function(){return n})),a.d(e,"k",(function(){return c})),a.d(e,"b",(function(){return i})),a.d(e,"h",(function(){return o})),a.d(e,"f",(function(){return s})),a.d(e,"g",(function(){return l})),a.d(e,"a",(function(){return d})),a.d(e,"l",(function(){return u})),a.d(e,"d",(function(){return m})),a.d(e,"j",(function(){return f})),a.d(e,"m",(function(){return g})),a.d(e,"c",(function(){return p})),a.d(e,"o",(function(){return b})),a.d(e,"p",(function(){return h})),a.d(e,"e",(function(){return _})),a.d(e,"n",(function(){return v}));a("99af");var r=a("0f27");function n(){return Object(r["a"])({url:"/categories",method:"get"})}function c(t,e){return Object(r["a"])({url:"categories/".concat(t,"/attributes"),method:"get",params:e})}function i(t){return Object(r["a"])({url:"/goods",method:"post",data:t})}function o(t){return Object(r["a"])({url:"/categories",method:"get",params:t})}function s(t){return Object(r["a"])({url:"/categories",method:"get",params:t})}function l(t){return Object(r["a"])({url:"/categories/"+t,method:"get"})}function d(t){return Object(r["a"])({url:"/categories",method:"post",data:t})}function u(t){return Object(r["a"])({url:"/categories/"+t,method:"delete"})}function m(t,e){return Object(r["a"])({url:"/categories/"+t,method:"put",data:e})}function f(t){return Object(r["a"])({url:"/goods",method:"get",params:t})}function g(t){return Object(r["a"])({url:"/goods/"+t,method:"delete"})}function p(t,e){return Object(r["a"])({url:"/categories/".concat(t,"/attributes"),method:"post",data:e})}function b(t,e,a){return Object(r["a"])({url:"categories/".concat(t,"/attributes/").concat(e),method:"put",data:a})}function h(t,e,a){return Object(r["a"])({url:"categories/".concat(t,"/attributes/").concat(e),method:"get",params:a})}function _(t,e,a){return Object(r["a"])({url:"categories/".concat(t,"/attributes/").concat(e),method:"put",data:a})}function v(t,e){return Object(r["a"])({url:"categories/".concat(t,"/attributes/").concat(e),method:"delete"})}}}]);
//# sourceMappingURL=chunk-27cb639c.aa27ad01.js.map